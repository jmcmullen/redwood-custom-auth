# Migration `20200616222612-remove-username-field`

This migration has been generated by Jay McMullen at 6/16/2020, 10:26:12 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "UserType" AS ENUM ('ADMIN', 'CUSTOMER', 'MODERATOR');

CREATE TABLE "public"."User" (
"email" text  NOT NULL ,"id" text  NOT NULL ,"password" text  NOT NULL ,"role" "UserType" NOT NULL DEFAULT E'CUSTOMER',"verified" boolean  NOT NULL DEFAULT false,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Message" (
"from" text  NOT NULL ,"id" text  NOT NULL ,"to" text  NOT NULL ,"userId" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "User.email" ON "public"."User"("email")

ALTER TABLE "public"."Message" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200616222612-remove-username-field
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,32 @@
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+generator client {
+  provider      = "prisma-client-js"
+  binaryTargets = env("BINARY_TARGET")
+}
+
+model User {
+  id       String    @default(cuid()) @id
+  email    String    @unique
+  verified Boolean   @default(false)
+  password String
+  role     UserType  @default(CUSTOMER)
+  messages Message[]
+}
+
+model Message {
+  id     String @default(cuid()) @id
+  to     String
+  from   String
+  userId String
+  user   User   @relation(fields: [userId], references: [id])
+}
+
+enum UserType {
+  ADMIN
+  CUSTOMER
+  MODERATOR
+}
```


